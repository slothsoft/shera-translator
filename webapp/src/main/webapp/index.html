<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>First Ones Translator ${project.version}</title>
<script src="bundle.js"></script>
<script src="lib/commons.js"></script>
<script src="lib/html-canvas.js" defer></script>
<script src="lib/phonetic-sound.js" defer></script>
<link rel="stylesheet" type="text/css" href="style/style.css">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>
</head>
<body onload="translateInput();">

	<div id="header">
		<div class="content"><img src="style/fot.png"/><h1>First Ones Translator ${project.version}</h1></div>
	</div>

	<div class="content translator-content">
		<div id="input">
			<textarea id="inputText" oninput="translateInput()">Shee-Rah</textarea>
			<div id="settings-wrapper">
				<div id="settings">
					<h2>Settings</h2>
					<table>
						<col width="25">
						<tr><td>Language:</td><td><select id="language" onchange="translateInput()">
						<option value="en" selected="selected">English</option>
						<option value="de">German</option>
						</select></td></tr>
					</table>
				</div>	
			</div>
		</div>
		
		<div id="result"> 
		
		</div>
		
		<script>
			function translateInput() {
				
				// clean the div
				
				var myNode = document.getElementById("result");
				while (myNode.firstChild) {
				    myNode.removeChild(myNode.firstChild);
				}
				
				// generate new elements for each sound
				
				var spliterator = new de.slothsoft.shera.WordSpliterator(getMapperByLanguage());
				spliterator.split(document.getElementById("inputText").value)
						.forEach(function(element) {
							var soundTemplate = document.createElement("phonetic-sound");
						 	soundTemplate.initFromSoundOrdinal(element);
							document.getElementById("result").appendChild(soundTemplate);
						});
			}

			function getMapperByLanguage() {
				var languageSelect = document.getElementById("language");
				var locale = languageSelect.options[languageSelect.selectedIndex].value;
				if (locale == "de")
					return new de.slothsoft.shera.mapper.GermanSoundMapper();
				return new de.slothsoft.shera.mapper.EnglishSoundMapper();
			}
		</script>
	
	</div>
	
	<div id="footer">
		<div class="content" align="center">Powered by <a href="http://slothsoft.de">slothsoft.de</a></div>
	</div>

</body>
</html>
